<!DOCTYPE html>
<html>
<head>
    <title>Appointments - Doctor Portal</title>
    <style>
        body { font-family: Arial; margin: 0; background: #f5f5f5; }
        .navbar { background: #333; color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .navbar a { color: white; text-decoration: none; margin-left: 1rem; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 2rem; }
        .hero { background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 3rem 2rem; text-align: center; border-radius: 15px; margin-bottom: 2rem; }
        .card { background: white; padding: 2rem; margin: 2rem 0; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .appointment-item { background: #f8f9fa; padding: 1.5rem; margin: 1rem 0; border-radius: 10px; border-left: 4px solid #28a745; }
        .appointment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .appointment-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .btn { padding: 0.8rem 1.5rem; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; display: inline-block; margin: 0.2rem; }
        .btn:hover { background: #218838; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        .status-pending { color: #ffc107; font-weight: bold; }
        .status-confirmed { color: #28a745; font-weight: bold; }
        .status-completed { color: #6c757d; font-weight: bold; }
        .filter-tabs { display: flex; gap: 1rem; margin-bottom: 2rem; }
        .tab { padding: 1rem 2rem; background: #e9ecef; border: none; border-radius: 8px; cursor: pointer; }
        .tab.active { background: #28a745; color: white; }
        h2 { color: #28a745; }
    </style>
</head>
<body>
    <div class="navbar">
        <h2>⚕️ Doctor Portal</h2>
        <div>
            <span id="doctorName" style="margin-right: 1rem;">Doctor</span>
            <a href="/doctor_dashboard">Dashboard</a>
            <a href="/doctor_patients">My Patients</a>
            <a href="/doctor_appointments">Appointments</a>
            <a href="#" onclick="logout()">Logout</a>
        </div>
    </div>

    <div class="container">
        <div class="hero">
            <h1>My Appointments</h1>
            <p>Manage your scheduled appointments</p>
        </div>

        <div class="card">
            <div class="filter-tabs">
                <button class="tab active" onclick="filterAppointments('all')">All</button>
                <button class="tab" onclick="filterAppointments('today')">Today</button>
                <button class="tab" onclick="filterAppointments('pending')">Pending</button>
                <button class="tab" onclick="filterAppointments('confirmed')">Confirmed</button>
                <button class="tab" onclick="filterAppointments('completed')">Completed</button>
            </div>

            <div id="appointmentsList">
                <div class="appointment-item" data-status="confirmed" data-date="2024-01-20">
                    <div class="appointment-header">
                        <h3>John Doe - Consultation</h3>
                        <div>
                            <button class="btn" onclick="completeAppointment(1)">Complete</button>
                            <button class="btn btn-warning" onclick="rescheduleAppointment(1)">Reschedule</button>
                            <button class="btn btn-danger" onclick="cancelAppointment(1)">Cancel</button>
                        </div>
                    </div>
                    <div class="appointment-details">
                        <div><strong>Date:</strong> January 20, 2024</div>
                        <div><strong>Time:</strong> 9:00 AM</div>
                        <div><strong>Type:</strong> Consultation</div>
                        <div><strong>Status:</strong> <span class="status-confirmed">Confirmed</span></div>
                        <div><strong>Patient Email:</strong> patient@demo.com</div>
                        <div><strong>Phone:</strong> (555) 123-4567</div>
                    </div>
                </div>

                <div class="appointment-item" data-status="pending" data-date="2024-01-21">
                    <div class="appointment-header">
                        <h3>Jane Smith - Follow-up</h3>
                        <div>
                            <button class="btn" onclick="confirmAppointment(2)">Confirm</button>
                            <button class="btn btn-warning" onclick="rescheduleAppointment(2)">Reschedule</button>
                            <button class="btn btn-danger" onclick="cancelAppointment(2)">Cancel</button>
                        </div>
                    </div>
                    <div class="appointment-details">
                        <div><strong>Date:</strong> January 21, 2024</div>
                        <div><strong>Time:</strong> 10:30 AM</div>
                        <div><strong>Type:</strong> Follow-up</div>
                        <div><strong>Status:</strong> <span class="status-pending">Pending</span></div>
                        <div><strong>Patient Email:</strong> jane.smith@email.com</div>
                        <div><strong>Phone:</strong> (555) 987-6543</div>
                    </div>
                </div>

                <div class="appointment-item" data-status="completed" data-date="2024-01-18">
                    <div class="appointment-header">
                        <h3>Mike Johnson - Check-up</h3>
                        <div>
                            <button class="btn" onclick="viewNotes(3)">View Notes</button>
                            <button class="btn btn-warning" onclick="scheduleFollowUp(3)">Schedule Follow-up</button>
                        </div>
                    </div>
                    <div class="appointment-details">
                        <div><strong>Date:</strong> January 18, 2024</div>
                        <div><strong>Time:</strong> 2:00 PM</div>
                        <div><strong>Type:</strong> Check-up</div>
                        <div><strong>Status:</strong> <span class="status-completed">Completed</span></div>
                        <div><strong>Patient Email:</strong> mike.johnson@email.com</div>
                        <div><strong>Phone:</strong> (555) 456-7890</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/theme.js"></script>
    <script>
        // Load doctor profile
        const currentDoctor = JSON.parse(localStorage.getItem('currentDoctor') || '{}');
        if (currentDoctor.firstName && currentDoctor.lastName) {
            document.getElementById('doctorName').textContent = `Dr. ${currentDoctor.firstName} ${currentDoctor.lastName}`;
        } else {
            window.location.href = '/login';
        }

        function logout() {
            localStorage.removeItem('currentDoctor');
            window.location.href = '/login';
        }

        function filterAppointments(filter) {
            const appointments = document.querySelectorAll('.appointment-item');
            const tabs = document.querySelectorAll('.tab');
            
            // Update active tab
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            appointments.forEach(appointment => {
                const status = appointment.getAttribute('data-status');
                const date = appointment.getAttribute('data-date');
                const today = new Date().toISOString().split('T')[0];
                
                let show = false;
                
                switch(filter) {
                    case 'all':
                        show = true;
                        break;
                    case 'today':
                        show = date === today;
                        break;
                    case 'pending':
                        show = status === 'pending';
                        break;
                    case 'confirmed':
                        show = status === 'confirmed';
                        break;
                    case 'completed':
                        show = status === 'completed';
                        break;
                }
                
                appointment.style.display = show ? 'block' : 'none';
            });
        }

        function confirmAppointment(id) {
            alert('Appointment confirmed successfully!');
            // In real app, update via API
        }

        function completeAppointment(id) {
            const notes = prompt('Add completion notes:');
            if (notes) {
                alert('Appointment marked as completed!');
                // In real app, save notes and update status
            }
        }

        function rescheduleAppointment(id) {
            const newDate = prompt('Enter new date (YYYY-MM-DD):');
            const newTime = prompt('Enter new time (HH:MM):');
            if (newDate && newTime) {
                alert('Appointment rescheduled successfully!');
                // In real app, update via API
            }
        }

        function cancelAppointment(id) {
            if (confirm('Are you sure you want to cancel this appointment?')) {
                alert('Appointment cancelled successfully!');
                // In real app, update via API
            }
        }

        function viewNotes(id) {
            alert('Appointment Notes:\n\nPatient showed improvement in symptoms. Recommended continued medication and follow-up in 2 weeks.');
            // In real app, show detailed notes modal
        }

        function scheduleFollowUp(id) {
            alert('Redirecting to schedule follow-up appointment...');
            // In real app, redirect to booking with pre-filled patient info
        }
    </script>
</body>
</html>